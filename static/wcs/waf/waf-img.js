/*! Built with http://stenciljs.com */
const{h:t}=window.waf;class e{constructor(){this.visibleAsyncLoading=!1,this.isBroken=!1}render(){return this.innerSrc?t("img",{src:this.innerSrc,alt:this.alt,width:this.width,height:this.height,sizes:this.sizes,srcset:this.srcset,decoding:this.decoding}):this.isBroken?t("span",{class:"waf-img__broken",style:this.infoDynamicStyles()},t("span",null,"broken image"),t("span",null,this.alt)):t("span",{class:"waf-img__loading",style:this.infoDynamicStyles()},t("span",{class:"lds-ellipsis"},t("span",null),t("span",null),t("span",null),t("span",null)),t("span",null,this.alt))}componentDidLoad(){if(this.src)if(this.visibleAsyncLoading&&"IntersectionObserver"in window)this.intersectionObserver=new IntersectionObserver((t,e)=>{t.forEach(t=>{if(t.isIntersecting){const t=document.readyState.toString();"loaded"===t||"interactive"===t||"complete"===t?this.srcSwapHandler(this.src):window.addEventListener("load",()=>{this.srcSwapHandler(this.src)}),e.disconnect()}})}),this.intersectionObserver.observe(this.wafImg);else{const t=document.readyState.toString();"loaded"===t||"interactive"===t||"complete"===t?this.srcSwapHandler(this.src):window.addEventListener("load",()=>{this.srcSwapHandler(this.src)})}else console.warn("waf-img | a src is required"),this.isBroken=!0}componentDidUnload(){this.intersectionObserver&&this.intersectionObserver.disconnect()}infoDynamicStyles(){return this.width&&this.height?{width:`${this.width}px`,height:`${this.height}px`}:{}}srcSwapHandler(t){fetch?fetch(t).then(t=>t.blob()).then(t=>URL.createObjectURL(t)).then(t=>{this.isBroken=!1,this.innerSrc=t}).catch(()=>{this.isBroken=!0,this.innerSrc=void 0}):(this.isBroken=!1,this.innerSrc=t)}static get is(){return"waf-img"}static get properties(){return{alt:{type:String,attr:"alt"},decoding:{type:String,attr:"decoding"},height:{type:String,attr:"height"},innerSrc:{state:!0},isBroken:{state:!0},sizes:{type:String,attr:"sizes"},src:{type:String,attr:"src",watchCallbacks:["srcSwapHandler"]},srcset:{type:String,attr:"srcset"},visibleAsyncLoading:{type:Boolean,attr:"visible-async-loading"},wafImg:{elementRef:!0},width:{type:String,attr:"width"}}}static get style(){return"waf-img{display:inline-block;vertical-align:middle;overflow:hidden}waf-img img{max-width:100%}waf-img .waf-img__broken,waf-img .waf-img__loading{color:#fff;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;max-width:100%;background-color:rgba(0,0,0,.75);-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:2px;padding:.5rem}waf-img .lds-ellipsis{display:inline-block;position:relative;width:64px;height:64px}waf-img .lds-ellipsis span{position:absolute;top:27px;width:11px;height:11px;border-radius:50%;background:#fff;-webkit-animation-timing-function:cubic-bezier(0,1,1,0);animation-timing-function:cubic-bezier(0,1,1,0)}waf-img .lds-ellipsis span:nth-child(1){left:6px;-webkit-animation:lds-ellipsis1 .6s infinite;animation:lds-ellipsis1 .6s infinite}waf-img .lds-ellipsis span:nth-child(2){left:6px;-webkit-animation:lds-ellipsis2 .6s infinite;animation:lds-ellipsis2 .6s infinite}waf-img .lds-ellipsis span:nth-child(3){left:26px;-webkit-animation:lds-ellipsis2 .6s infinite;animation:lds-ellipsis2 .6s infinite}waf-img .lds-ellipsis span:nth-child(4){left:45px;-webkit-animation:lds-ellipsis3 .6s infinite;animation:lds-ellipsis3 .6s infinite}\@-webkit-keyframes lds-ellipsis1{0%{-webkit-transform:scale(0);transform:scale(0)}100%{-webkit-transform:scale(1);transform:scale(1)}}\@keyframes lds-ellipsis1{0%{-webkit-transform:scale(0);transform:scale(0)}100%{-webkit-transform:scale(1);transform:scale(1)}}\@-webkit-keyframes lds-ellipsis3{0%{-webkit-transform:scale(1);transform:scale(1)}100%{-webkit-transform:scale(0);transform:scale(0)}}\@keyframes lds-ellipsis3{0%{-webkit-transform:scale(1);transform:scale(1)}100%{-webkit-transform:scale(0);transform:scale(0)}}\@-webkit-keyframes lds-ellipsis2{0%{-webkit-transform:translate(0,0);transform:translate(0,0)}100%{-webkit-transform:translate(19px,0);transform:translate(19px,0)}}\@keyframes lds-ellipsis2{0%{-webkit-transform:translate(0,0);transform:translate(0,0)}100%{-webkit-transform:translate(19px,0);transform:translate(19px,0)}}"}}export{e as WafImg};